/**
 * ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
 * ‚ïë                    CHE¬∑NU‚Ñ¢ ‚Äî FAQ PAGE                                        ‚ïë
 * ‚ïë                    Foire aux questions                                       ‚ïë
 * ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
 */

import React, { useState } from 'react';
import { Link } from 'react-router-dom';
import { 
  ChevronDown, ChevronUp, HelpCircle, Search,
  Shield, Brain, Wallet, Users, Lock, Zap
} from 'lucide-react';

// Types
interface FAQItem {
  question: string;
  answer: string;
  category: string;
}

// FAQ Data
const faqData: FAQItem[] = [
  // G√©n√©ral
  {
    category: 'G√©n√©ral',
    question: "Qu'est-ce que CHE¬∑NU exactement?",
    answer: "CHE¬∑NU est un Governed Intelligence Operating System - le premier syst√®me d'exploitation qui vous donne le contr√¥le total sur vos agents IA, vos donn√©es et vos co√ªts. Contrairement aux chatbots traditionnels, CHE¬∑NU organise votre vie en 9 sph√®res distinctes (Personnel, Business, Cr√©atif, etc.) et applique le principe 'Gouvernance > Ex√©cution' o√π chaque action IA requiert votre approbation."
  },
  {
    category: 'G√©n√©ral',
    question: "Qu'est-ce que 'Gouvernance > Ex√©cution' signifie?",
    answer: "C'est notre philosophie fondamentale. Avant qu'une IA ex√©cute une action importante, elle passe par un checkpoint qui requiert votre validation. Vous gardez le contr√¥le √† tout moment. L'IA propose, vous disposez. Cela garantit que l'IA reste un outil √† votre service, jamais l'inverse."
  },
  {
    category: 'G√©n√©ral',
    question: "Qui est Nova?",
    answer: "Nova est l'intelligence syst√®me de CHE¬∑NU. Elle supervise tous vos agents IA, g√®re vos threads, et assure la coh√©rence de votre espace de travail. Nova n'est pas un agent 'engag√©' - elle est toujours pr√©sente et fait partie int√©grante du syst√®me. Elle orchestre les 226 agents sp√©cialis√©s disponibles."
  },
  
  // Sph√®res
  {
    category: 'Sph√®res',
    question: "Que sont les 9 Sph√®res?",
    answer: "Les Sph√®res sont des contextes de vie compl√®tement s√©par√©s: 1) Personal üè†, 2) Business üíº, 3) Government & Institutions üèõÔ∏è, 4) Studio de cr√©ation üé®, 5) Community üë•, 6) Social & Media üì±, 7) Entertainment üé¨, 8) My Team ü§ù, 9) Scholar üìö. Chaque sph√®re ouvre un Bureau avec la m√™me structure, mais des donn√©es et agents diff√©rents."
  },
  {
    category: 'Sph√®res',
    question: "Puis-je ajouter plus de sph√®res?",
    answer: "Non, le nombre de sph√®res est fix√© √† 9. C'est une d√©cision architecturale d√©lib√©r√©e. 9 sph√®res couvrent tous les aspects de la vie sans cr√©er de surcharge cognitive. Au lieu d'ajouter des sph√®res, vous pouvez personnaliser les sections et agents au sein de chaque sph√®re."
  },
  {
    category: 'Sph√®res',
    question: "Mes donn√©es sont-elles s√©par√©es entre les sph√®res?",
    answer: "Oui, absolument. Chaque sph√®re est un environnement isol√©. Vos donn√©es Business ne sont jamais m√©lang√©es avec vos donn√©es Personal. Cette s√©paration est fondamentale pour la clart√© et la s√©curit√©. Les agents d'une sph√®re n'ont pas acc√®s aux donn√©es des autres sph√®res sauf autorisation explicite."
  },
  
  // Agents
  {
    category: 'Agents',
    question: "Que sont les agents dans CHE¬∑NU?",
    answer: "Les agents sont des IA sp√©cialis√©es dans des domaines pr√©cis. Il y a 226 agents couvrant des domaines comme le juridique, la comptabilit√©, la cr√©ation de contenu, l'immobilier, etc. Chaque agent a un co√ªt en tokens, un p√©rim√®tre d√©fini, et agit uniquement quand vous l'autorisez."
  },
  {
    category: 'Agents',
    question: "Quelle est la diff√©rence entre Nova et un agent?",
    answer: "Nova est l'intelligence syst√®me - elle est toujours pr√©sente, gratuite, et supervise tout. Les agents sont des sp√©cialistes 'engag√©s' pour des t√¢ches sp√©cifiques. Vous payez pour leur utilisation. Nova peut vous recommander quel agent utiliser, mais c'est vous qui d√©cidez."
  },
  {
    category: 'Agents',
    question: "Puis-je cr√©er mes propres agents?",
    answer: "Oui! Selon votre plan, vous pouvez cr√©er des agents personnalis√©s avec des instructions sp√©cifiques, un p√©rim√®tre d√©fini, et des r√®gles de gouvernance. Le plan Base permet 3 agents custom, Pro en permet 10, et les plans Enterprise offrent plus de flexibilit√©."
  },
  
  // Tokens & Co√ªts
  {
    category: 'Tokens & Co√ªts',
    question: "Que sont les tokens CHE¬∑NU?",
    answer: "Les tokens CHE¬∑NU sont des cr√©dits internes qui repr√©sentent l'√©nergie d'intelligence utilis√©e. Ce ne sont PAS des cryptomonnaies - ils n'ont aucune valeur sp√©culative. Ils servent uniquement √† rendre les co√ªts transparents et contr√¥lables. Chaque action IA co√ªte un certain nombre de tokens."
  },
  {
    category: 'Tokens & Co√ªts',
    question: "Comment fonctionne la facturation?",
    answer: "Chaque plan inclut un nombre de requ√™tes mensuelles. Une 'requ√™te' correspond √† une interaction avec l'IA (question/r√©ponse). Si vous d√©passez votre quota, vous pouvez acheter des packs additionnels ou upgrader votre plan. Vos requ√™tes non utilis√©es ne se cumulent pas au mois suivant."
  },
  {
    category: 'Tokens & Co√ªts',
    question: "Pourquoi vos prix sont-ils plus bas que ChatGPT?",
    answer: "Nous avons d√©velopp√© 4 modules d'optimisation des co√ªts (Semantic Cache, Prompt Compressor, Local Model Router, Backlog Learner) qui r√©duisent nos co√ªts d'infrastructure de 50-80%. Ces √©conomies sont r√©percut√©es sur nos prix. Notre prix par requ√™te est 60-95% moins cher que la concurrence."
  },
  
  // S√©curit√© & Vie Priv√©e
  {
    category: 'S√©curit√©',
    question: "Mes donn√©es sont-elles en s√©curit√©?",
    answer: "Absolument. Nous utilisons un chiffrement de bout en bout, vos donn√©es sont stock√©es dans des centres de donn√©es certifi√©s (SOC2, ISO27001), et nous ne vendons JAMAIS vos donn√©es. Contrairement √† d'autres services IA, vos conversations ne sont pas utilis√©es pour entra√Æner nos mod√®les sans votre consentement explicite."
  },
  {
    category: 'S√©curit√©',
    question: "CHE¬∑NU est-il conforme au RGPD?",
    answer: "Oui. Nous sommes pleinement conformes au RGPD europ√©en et au EU AI Act. Vous avez le droit d'acc√®s, de rectification, de suppression et de portabilit√© de vos donn√©es. Notre mod√®le 'Gouvernance > Ex√©cution' est align√© avec les principes d'IA responsable exig√©s par les r√©gulations europ√©ennes."
  },
  {
    category: 'S√©curit√©',
    question: "O√π sont h√©berg√©es mes donn√©es?",
    answer: "Par d√©faut, vos donn√©es sont h√©berg√©es dans l'UE (France/Allemagne). Les clients Enterprise peuvent choisir leur r√©gion d'h√©bergement ou opter pour une installation on-premise. Nous offrons √©galement une option de chiffrement avec cl√©s client pour les donn√©es sensibles."
  },
  
  // Technique
  {
    category: 'Technique',
    question: "Quels mod√®les d'IA utilisez-vous?",
    answer: "Nous utilisons un mix intelligent de mod√®les: Claude (Anthropic), GPT-4 (OpenAI), et des mod√®les locaux open-source (Llama, Mistral) pour les t√¢ches simples. Notre routeur intelligent choisit automatiquement le meilleur mod√®le selon la complexit√© de votre requ√™te et votre budget."
  },
  {
    category: 'Technique',
    question: "Puis-je int√©grer CHE¬∑NU avec d'autres outils?",
    answer: "Oui! Le plan Pro inclut des int√©grations avec Google Calendar, Google Drive, et d'autres services populaires. Le plan Business et sup√©rieur permet des int√©grations custom via notre API. Nous supportons les webhooks, Zapier, et des connecteurs natifs pour Slack, Notion, etc."
  },
  {
    category: 'Technique',
    question: "Y a-t-il une API disponible?",
    answer: "Oui, √† partir du plan Pro. L'API permet d'int√©grer CHE¬∑NU dans vos propres applications, d'automatiser des workflows, et d'acc√©der √† vos agents programmatiquement. Documentation compl√®te disponible sur docs.chenu.ai."
  },
  
  // Plans & Abonnements
  {
    category: 'Abonnements',
    question: "Puis-je essayer gratuitement?",
    answer: "Oui! Le plan D√©couverte est gratuit pour toujours avec 75 requ√™tes/mois, 3 sph√®res, et 1 agent. C'est suffisant pour d√©couvrir CHE¬∑NU et comprendre sa valeur. Aucune carte de cr√©dit n'est requise pour commencer."
  },
  {
    category: 'Abonnements',
    question: "Puis-je changer de plan √† tout moment?",
    answer: "Oui. Vous pouvez upgrader √† tout moment (effet imm√©diat, au prorata). Pour downgrader, le changement prend effet au prochain cycle de facturation. Si vous downgrader, assurez-vous de ne pas d√©passer les limites du nouveau plan (agents, stockage, etc.)."
  },
  {
    category: 'Abonnements',
    question: "Offrez-vous une r√©duction annuelle?",
    answer: "Oui! Tous les plans payants b√©n√©ficient de 20% de r√©duction en choisissant la facturation annuelle. Par exemple, le plan Pro passe de $39.99/mois √† $31.99/mois factur√© annuellement."
  },
];

// FAQ Accordion Component
const FAQAccordion: React.FC<{ item: FAQItem; isOpen: boolean; toggle: () => void }> = ({ 
  item, isOpen, toggle 
}) => {
  return (
    <div className="border-b border-[#8D8371]/20">
      <button
        onClick={toggle}
        className="w-full py-6 flex items-center justify-between text-left hover:text-[#D8B26A] transition"
      >
        <span className="text-lg font-medium text-white pr-8">{item.question}</span>
        {isOpen ? (
          <ChevronUp className="w-5 h-5 text-[#D8B26A] shrink-0" />
        ) : (
          <ChevronDown className="w-5 h-5 text-[#8D8371] shrink-0" />
        )}
      </button>
      {isOpen && (
        <div className="pb-6 text-[#E9E4D6]/70 leading-relaxed">
          {item.answer}
        </div>
      )}
    </div>
  );
};

// Main Component
export const FAQPage: React.FC = () => {
  const [openIndex, setOpenIndex] = useState<number | null>(0);
  const [searchTerm, setSearchTerm] = useState('');
  const [activeCategory, setActiveCategory] = useState<string | null>(null);
  
  const categories = [...new Set(faqData.map(item => item.category))];
  
  const filteredFAQ = faqData.filter(item => {
    const matchesSearch = searchTerm === '' || 
      item.question.toLowerCase().includes(searchTerm.toLowerCase()) ||
      item.answer.toLowerCase().includes(searchTerm.toLowerCase());
    const matchesCategory = activeCategory === null || item.category === activeCategory;
    return matchesSearch && matchesCategory;
  });
  
  const categoryIcons: Record<string, React.ReactNode> = {
    'G√©n√©ral': <HelpCircle className="w-4 h-4" />,
    'Sph√®res': <Brain className="w-4 h-4" />,
    'Agents': <Users className="w-4 h-4" />,
    'Tokens & Co√ªts': <Wallet className="w-4 h-4" />,
    'S√©curit√©': <Shield className="w-4 h-4" />,
    'Technique': <Zap className="w-4 h-4" />,
    'Abonnements': <Lock className="w-4 h-4" />,
  };
  
  return (
    <div className="min-h-screen bg-gradient-to-b from-[#1E1F22] to-[#2F4C39]">
      {/* Navigation */}
      <nav className="fixed top-0 left-0 right-0 z-50 bg-[#1E1F22]/90 backdrop-blur-md border-b border-[#D8B26A]/20">
        <div className="max-w-7xl mx-auto px-6 py-4 flex items-center justify-between">
          <Link to="/" className="flex items-center gap-3">
            <div className="w-10 h-10 rounded-lg bg-gradient-to-br from-[#D8B26A] to-[#7A593A] flex items-center justify-center">
              <span className="text-white font-bold text-lg">C</span>
            </div>
            <span className="text-2xl font-bold text-white">
              CHE<span className="text-[#D8B26A]">¬∑</span>NU
            </span>
          </Link>
          
          <div className="flex items-center gap-4">
            <Link to="/login" className="text-[#E9E4D6] hover:text-[#D8B26A] transition">
              Connexion
            </Link>
            <Link to="/signup" className="px-6 py-2 bg-[#D8B26A] text-[#1E1F22] font-semibold rounded-lg hover:bg-[#E9E4D6] transition">
              Commencer
            </Link>
          </div>
        </div>
      </nav>

      {/* Header */}
      <section className="pt-32 pb-12 px-6">
        <div className="max-w-4xl mx-auto text-center">
          <HelpCircle className="w-16 h-16 text-[#D8B26A] mx-auto mb-6" />
          <h1 className="text-5xl font-bold text-white mb-6">
            Foire aux questions
          </h1>
          <p className="text-xl text-[#E9E4D6]/70 mb-8">
            Trouvez rapidement les r√©ponses √† vos questions sur CHE¬∑NU
          </p>
          
          {/* Search */}
          <div className="relative max-w-xl mx-auto">
            <Search className="absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-[#8D8371]" />
            <input
              type="text"
              placeholder="Rechercher une question..."
              value={searchTerm}
              onChange={(e) => setSearchTerm(e.target.value)}
              className="w-full pl-12 pr-4 py-4 bg-[#1E1F22] border border-[#8D8371]/30 rounded-xl text-white placeholder-[#8D8371] focus:border-[#D8B26A] focus:outline-none transition"
            />
          </div>
        </div>
      </section>

      {/* Category Filters */}
      <section className="px-6 pb-8">
        <div className="max-w-4xl mx-auto">
          <div className="flex flex-wrap justify-center gap-3">
            <button
              onClick={() => setActiveCategory(null)}
              className={`px-4 py-2 rounded-lg font-medium transition flex items-center gap-2 ${
                activeCategory === null 
                  ? 'bg-[#D8B26A] text-[#1E1F22]' 
                  : 'bg-[#1E1F22] text-[#E9E4D6]/70 hover:text-white border border-[#8D8371]/30'
              }`}
            >
              Tous
            </button>
            {categories.map(category => (
              <button
                key={category}
                onClick={() => setActiveCategory(category)}
                className={`px-4 py-2 rounded-lg font-medium transition flex items-center gap-2 ${
                  activeCategory === category 
                    ? 'bg-[#D8B26A] text-[#1E1F22]' 
                    : 'bg-[#1E1F22] text-[#E9E4D6]/70 hover:text-white border border-[#8D8371]/30'
                }`}
              >
                {categoryIcons[category]}
                {category}
              </button>
            ))}
          </div>
        </div>
      </section>

      {/* FAQ List */}
      <section className="px-6 pb-20">
        <div className="max-w-4xl mx-auto">
          <div className="bg-[#1E1F22] rounded-2xl border border-[#8D8371]/20 p-8">
            {filteredFAQ.length === 0 ? (
              <div className="text-center py-12">
                <p className="text-[#E9E4D6]/60">Aucune question ne correspond √† votre recherche.</p>
              </div>
            ) : (
              filteredFAQ.map((item, idx) => (
                <FAQAccordion
                  key={idx}
                  item={item}
                  isOpen={openIndex === idx}
                  toggle={() => setOpenIndex(openIndex === idx ? null : idx)}
                />
              ))
            )}
          </div>
        </div>
      </section>

      {/* Still Have Questions */}
      <section className="py-16 px-6 bg-[#1E1F22]">
        <div className="max-w-3xl mx-auto text-center">
          <h2 className="text-3xl font-bold text-white mb-4">
            Vous avez encore des questions?
          </h2>
          <p className="text-[#E9E4D6]/70 mb-8">
            Notre √©quipe est l√† pour vous aider.
          </p>
          <div className="flex flex-col sm:flex-row items-center justify-center gap-4">
            <Link
              to="/contact"
              className="px-8 py-3 bg-[#D8B26A] text-[#1E1F22] font-semibold rounded-xl hover:bg-[#E9E4D6] transition"
            >
              Nous contacter
            </Link>
            <a
              href="mailto:support@chenu.ai"
              className="px-8 py-3 border border-[#D8B26A] text-[#D8B26A] font-semibold rounded-xl hover:bg-[#D8B26A]/10 transition"
            >
              support@chenu.ai
            </a>
          </div>
        </div>
      </section>

      {/* Footer */}
      <footer className="py-12 px-6 bg-[#1E1F22] border-t border-[#D8B26A]/20">
        <div className="max-w-7xl mx-auto text-center">
          <p className="text-[#E9E4D6]/40 text-sm">
            ¬© 2025 CHE¬∑NU‚Ñ¢. Tous droits r√©serv√©s. | Gouvernance {'>'} Ex√©cution
          </p>
        </div>
      </footer>
    </div>
  );
};

export default FAQPage;
