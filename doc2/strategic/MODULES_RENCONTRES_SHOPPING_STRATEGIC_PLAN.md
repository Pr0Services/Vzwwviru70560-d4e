# üéØ CHE¬∑NU V45 ‚Äî PLAN STRAT√âGIQUE MODULES MAJEURS

```
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë                                                                               ‚ïë
‚ïë      MODULE RENCONTRES (Community) + MODULE SHOPPING (Cross-Sphere)          ‚ïë
‚ïë                                                                               ‚ïë
‚ïë              Plan Strat√©gique Complet ‚Äî D√©cembre 2025                        ‚ïë
‚ïë                                                                               ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
```

**Auteur:** Claude Dev Agent avec Jo  
**Date:** 22 D√©cembre 2025  
**Status:** PLANIFICATION STRAT√âGIQUE  
**Impact:** MAJEUR - Ces modules peuvent rendre CHE¬∑NU incontournable

---

# PARTIE 1: MODULE RENCONTRES üíï

## üéØ VISION

**Probl√®me avec le Swipe (Tinder/Bumble):**
- ‚ùå D√©cisions bas√©es sur 2-3 photos en 0.5 secondes
- ‚ùå Fausses repr√©sentations (photos retouch√©es, anciennes)
- ‚ùå Gamification addictive (dopamine du match)
- ‚ùå Objectification des personnes
- ‚ùå Superficialit√© encourag√©e
- ‚ùå Fatigue de l'application ("swipe fatigue")
- ‚ùå Conversations qui m√®nent nulle part

**Notre Approche CHE¬∑NU:**
- ‚úÖ Connexions bas√©es sur ACTIVIT√âS partag√©es d'abord
- ‚úÖ Authenticit√© via profils riches et v√©rifiables
- ‚úÖ Rencontres dans un contexte (groupe, √©v√©nement, activit√©)
- ‚úÖ Progression naturelle de la relation
- ‚úÖ Gouvernance et s√©curit√©

---

## üìã ARCHITECTURE MODULE RENCONTRES

```
COMMUNITY SPHERE ‚Üí MODULE RENCONTRES
‚îÇ
‚îú‚îÄ 1Ô∏è‚É£ DISCOVERY (Comment se d√©couvrir)
‚îÇ   ‚îú‚îÄ Activity-Based Discovery
‚îÇ   ‚îÇ   ‚îú‚îÄ Activit√©s locales (sports, arts, b√©n√©volat)
‚îÇ   ‚îÇ   ‚îú‚îÄ Groupes d'int√©r√™t (hiking, cuisine, lecture)
‚îÇ   ‚îÇ   ‚îú‚îÄ √âv√©nements communautaires
‚îÇ   ‚îÇ   ‚îî‚îÄ Projets collaboratifs
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ Compatibility Discovery
‚îÇ   ‚îÇ   ‚îú‚îÄ Int√©r√™ts partag√©s (sync Personal Sphere)
‚îÇ   ‚îÇ   ‚îú‚îÄ Valeurs communes (questionnaire approfondi)
‚îÇ   ‚îÇ   ‚îú‚îÄ Style de vie compatible
‚îÇ   ‚îÇ   ‚îî‚îÄ Objectifs de vie align√©s
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ Organic Discovery
‚îÇ       ‚îú‚îÄ Amis d'amis (graphe social)
‚îÇ       ‚îú‚îÄ Voisinage / Quartier
‚îÇ       ‚îú‚îÄ Communaut√©s locales
‚îÇ       ‚îî‚îÄ Alumni / Anciens coll√®gues
‚îÇ
‚îú‚îÄ 2Ô∏è‚É£ MODES DE CONNEXION (Pas de swipe!)
‚îÇ   ‚îú‚îÄ üíï Mode Amour (Romantic)
‚îÇ   ‚îÇ   ‚îú‚îÄ Profil relationnel approfondi
‚îÇ   ‚îÇ   ‚îú‚îÄ Intentions claires (s√©rieux, casual, etc.)
‚îÇ   ‚îÇ   ‚îú‚îÄ Compatibilit√© calcul√©e (pas juste physique)
‚îÇ   ‚îÇ   ‚îî‚îÄ Slow dating (limiter les matchs/jour)
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ ü§ù Mode Amiti√© (Friendship)
‚îÇ   ‚îÇ   ‚îú‚îÄ Nouveau en ville
‚îÇ   ‚îÇ   ‚îú‚îÄ Recherche d'amis avec int√©r√™ts communs
‚îÇ   ‚îÇ   ‚îú‚îÄ Groupes d'amis (squad building)
‚îÇ   ‚îÇ   ‚îî‚îÄ Partenaires d'activit√©s
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ üéØ Mode Activit√©s (Activity Partners)
‚îÇ   ‚îÇ   ‚îú‚îÄ Sports (tennis, running, escalade)
‚îÇ   ‚îÇ   ‚îú‚îÄ Voyages (cherche compagnon de voyage)
‚îÇ   ‚îÇ   ‚îú‚îÄ Arts (jam sessions, ateliers)
‚îÇ   ‚îÇ   ‚îî‚îÄ Projets (startup, cr√©atif, b√©n√©volat)
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ üë• Mode Groupes (Group Building)
‚îÇ       ‚îú‚îÄ Cr√©er un groupe autour d'une activit√©
‚îÇ       ‚îú‚îÄ Rejoindre des groupes existants
‚îÇ       ‚îú‚îÄ √âv√©nements de groupe
‚îÇ       ‚îî‚îÄ Communaut√©s locales
‚îÇ
‚îú‚îÄ 3Ô∏è‚É£ PROFIL AUTHENTIQUE (Anti-Fausse Repr√©sentation)
‚îÇ   ‚îú‚îÄ V√©rifications
‚îÇ   ‚îÇ   ‚îú‚îÄ Photo v√©rifi√©e (selfie live compar√©)
‚îÇ   ‚îÇ   ‚îú‚îÄ Identit√© v√©rifi√©e (optionnel mais badge)
‚îÇ   ‚îÇ   ‚îú‚îÄ Emploi v√©rifi√© (connexion LinkedIn/Business)
‚îÇ   ‚îÇ   ‚îî‚îÄ Reviews des connexions pr√©c√©dentes
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ Profil Riche
‚îÇ   ‚îÇ   ‚îú‚îÄ Vid√©o de pr√©sentation (30 sec)
‚îÇ   ‚îÇ   ‚îú‚îÄ Voice note (personnalit√© audible)
‚îÇ   ‚îÇ   ‚îú‚îÄ Photos d'activit√©s (pas que selfies)
‚îÇ   ‚îÇ   ‚îú‚îÄ "Une journ√©e dans ma vie" stories
‚îÇ   ‚îÇ   ‚îî‚îÄ R√©ponses √† questions personnalis√©es
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ Transparence
‚îÇ       ‚îú‚îÄ Derni√®re activit√© visible
‚îÇ       ‚îú‚îÄ Temps de r√©ponse moyen
‚îÇ       ‚îú‚îÄ Taux de conversation ‚Üí rencontre
‚îÇ       ‚îî‚îÄ Feedback anonyme des connexions
‚îÇ
‚îú‚îÄ 4Ô∏è‚É£ MATCHING INTELLIGENT (Pas de ranking!)
‚îÇ   ‚îú‚îÄ Crit√®res de compatibilit√©
‚îÇ   ‚îÇ   ‚îú‚îÄ G√©olocalisation (distance acceptable)
‚îÇ   ‚îÇ   ‚îú‚îÄ Disponibilit√© (horaires compatibles)
‚îÇ   ‚îÇ   ‚îú‚îÄ Int√©r√™ts (score de chevauchement)
‚îÇ   ‚îÇ   ‚îú‚îÄ Valeurs (alignement)
‚îÇ   ‚îÇ   ‚îú‚îÄ Style de communication
‚îÇ   ‚îÇ   ‚îî‚îÄ Objectifs relationnels
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ Pr√©sentation
‚îÇ   ‚îÇ   ‚îú‚îÄ ‚ùå PAS de ranking (pas "les meilleurs d'abord")
‚îÇ   ‚îÇ   ‚îú‚îÄ ‚úÖ Ordre chronologique + filtres
‚îÇ   ‚îÇ   ‚îú‚îÄ ‚úÖ Suggestions contextuelles (activit√© commune)
‚îÇ   ‚îÇ   ‚îî‚îÄ ‚úÖ D√©couverte al√©atoire mod√©r√©e
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ Contr√¥le utilisateur
‚îÇ       ‚îú‚îÄ Nombre max de suggestions/jour
‚îÇ       ‚îú‚îÄ Filtres granulaires
‚îÇ       ‚îú‚îÄ Mode "pause"
‚îÇ       ‚îî‚îÄ Pr√©f√©rences de communication
‚îÇ
‚îú‚îÄ 5Ô∏è‚É£ CONVERSATION & PROGRESSION
‚îÇ   ‚îú‚îÄ Ice-breakers contextuels
‚îÇ   ‚îÇ   ‚îú‚îÄ Questions bas√©es sur profil
‚îÇ   ‚îÇ   ‚îú‚îÄ Activit√© commune comme sujet
‚îÇ   ‚îÇ   ‚îú‚îÄ Voice messages encourag√©s
‚îÇ   ‚îÇ   ‚îî‚îÄ Pas de "Hey" autoris√© (minimum d'effort)
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ Progression naturelle
‚îÇ   ‚îÇ   ‚îú‚îÄ Chat ‚Üí Voice call ‚Üí Video call ‚Üí IRL
‚îÇ   ‚îÇ   ‚îú‚îÄ Suggestions d'activit√©s √† faire ensemble
‚îÇ   ‚îÇ   ‚îú‚îÄ Planificateur de rencontre int√©gr√©
‚îÇ   ‚îÇ   ‚îî‚îÄ Rappels de suivi (pas ghosting)
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ Post-rencontre
‚îÇ       ‚îú‚îÄ Check-in de s√©curit√©
‚îÇ       ‚îú‚îÄ Feedback mutuel (optionnel, anonyme)
‚îÇ       ‚îú‚îÄ Continuer ou next steps
‚îÇ       ‚îî‚îÄ Historique des rencontres
‚îÇ
‚îî‚îÄ 6Ô∏è‚É£ S√âCURIT√â & GOUVERNANCE
    ‚îú‚îÄ V√©rification identit√©
    ‚îú‚îÄ Signalement comportements
    ‚îú‚îÄ Mod√©ration IA + humaine
    ‚îú‚îÄ Check-in de s√©curit√© avant/apr√®s rencontre
    ‚îú‚îÄ Partage de localisation optionnel
    ‚îî‚îÄ Blocage et protection de la vie priv√©e
```

---

## üîß COMPOSANTS TECHNIQUES RENCONTRES

### Backend Services

```python
# backend/services/community/rencontres_service.py

class RencontresService:
    """Service principal du module Rencontres"""
    
    # === Discovery ===
    async def discover_by_activity(self, user_id: str, activity_type: str) -> List[Profile]
    async def discover_by_interest(self, user_id: str, interests: List[str]) -> List[Profile]
    async def discover_by_location(self, user_id: str, radius_km: int) -> List[Profile]
    async def discover_groups_nearby(self, user_id: str, category: str) -> List[Group]
    
    # === Profiles ===
    async def create_rencontre_profile(self, user_id: str, mode: ConnectionMode) -> Profile
    async def verify_photo(self, user_id: str, selfie: bytes) -> VerificationResult
    async def add_video_intro(self, user_id: str, video: bytes) -> str
    async def add_voice_note(self, user_id: str, audio: bytes) -> str
    
    # === Matching ===
    async def calculate_compatibility(self, user_a: str, user_b: str) -> CompatibilityScore
    async def get_suggestions(self, user_id: str, filters: SuggestionFilters) -> List[Suggestion]
    async def express_interest(self, from_user: str, to_user: str, context: str) -> Interest
    async def respond_to_interest(self, interest_id: str, response: InterestResponse) -> Connection
    
    # === Connections ===
    async def start_conversation(self, connection_id: str, message: str) -> Conversation
    async def schedule_activity(self, connection_id: str, activity: Activity) -> ScheduledActivity
    async def schedule_meeting(self, connection_id: str, meeting: Meeting) -> ScheduledMeeting
    
    # === Safety ===
    async def verify_identity(self, user_id: str, documents: List[bytes]) -> VerificationStatus
    async def safety_check_in(self, user_id: str, meeting_id: str, status: SafetyStatus)
    async def report_user(self, reporter_id: str, reported_id: str, reason: str)
    async def block_user(self, user_id: str, blocked_id: str)
```

### Data Models

```python
# backend/models/community/rencontres_models.py

class ConnectionMode(Enum):
    ROMANTIC = "romantic"       # üíï Amour
    FRIENDSHIP = "friendship"   # ü§ù Amiti√©
    ACTIVITY = "activity"       # üéØ Partenaire d'activit√©s
    GROUP = "group"            # üë• Groupes

class RelationshipGoal(Enum):
    LONG_TERM = "long_term"
    CASUAL = "casual"
    OPEN = "open"
    FRIENDS_FIRST = "friends_first"

@dataclass
class RencontreProfile:
    id: str
    user_id: str
    created_at: datetime
    
    # Mode(s) actif(s)
    active_modes: List[ConnectionMode]
    
    # Profil de base (sync de Personal)
    display_name: str
    age: int
    location: Location
    
    # Contenu authentique
    photos: List[VerifiedPhoto]  # Au moins 1 v√©rifi√©e
    video_intro: Optional[str]   # URL vid√©o 30 sec
    voice_note: Optional[str]    # URL audio
    
    # R√©ponses questions personnalis√©es
    prompts: Dict[str, str]  # "Mon dimanche id√©al": "..."
    
    # Pr√©f√©rences
    interests: List[str]         # Sync de Personal
    activities: List[str]        # Ce que je fais
    looking_for: List[str]       # Ce que je cherche
    
    # Pour mode romantique
    relationship_goal: Optional[RelationshipGoal]
    
    # V√©rifications
    photo_verified: bool
    identity_verified: bool
    
    # Stats (transparence)
    response_rate: float         # % de r√©ponses
    avg_response_time: timedelta # Temps moyen
    conversations_to_meetings: float  # % qui m√®nent √† une rencontre
    
    # Param√®tres
    max_suggestions_per_day: int
    distance_preference: int  # km
    age_range: Tuple[int, int]
    is_paused: bool

@dataclass
class CompatibilityScore:
    overall: float  # 0-100
    breakdown: Dict[str, float]  # Par dimension
    # interest_overlap: float
    # values_alignment: float
    # lifestyle_compatibility: float
    # communication_style: float
    # goals_alignment: float
    mutual_activities: List[str]  # Activit√©s en commun
    conversation_starters: List[str]  # Suggestions de sujets

@dataclass
class Interest:
    """Expression d'int√©r√™t envers quelqu'un"""
    id: str
    from_user_id: str
    to_user_id: str
    created_at: datetime
    context: str  # "On partage l'int√©r√™t pour la randonn√©e"
    message: Optional[str]  # Message personnalis√©
    status: str  # pending, accepted, declined
    mode: ConnectionMode

@dataclass
class Connection:
    """Connexion mutuelle"""
    id: str
    users: List[str]  # 2 user_ids
    created_at: datetime
    mode: ConnectionMode
    
    # Progression
    stage: str  # chatting, voice_calls, video_calls, met_irl, ongoing
    activities_together: List[ScheduledActivity]
    meetings: List[ScheduledMeeting]
    
    # Qualit√©
    last_interaction: datetime
    interaction_frequency: str  # daily, weekly, monthly

@dataclass
class Group:
    """Groupe d'activit√©s ou d'int√©r√™ts"""
    id: str
    name: str
    description: str
    category: str  # sports, arts, outdoors, social, etc.
    location: Location
    
    # Membres
    admin_ids: List[str]
    member_ids: List[str]
    max_members: Optional[int]
    
    # Activit√©s
    recurring_activities: List[RecurringActivity]
    upcoming_events: List[GroupEvent]
    
    # R√®gles
    joining_requirements: str  # open, approval_required, invite_only
    age_range: Optional[Tuple[int, int]]
    gender_preference: Optional[str]  # mixed, women_only, etc.

@dataclass
class ScheduledMeeting:
    """Rencontre planifi√©e IRL"""
    id: str
    connection_id: str
    proposed_by: str
    
    # D√©tails
    datetime: datetime
    location: MeetingLocation
    activity: str  # caf√©, d√Æner, activit√©, etc.
    
    # Confirmation
    status: str  # proposed, confirmed, completed, cancelled
    
    # S√©curit√©
    safety_check_in_scheduled: datetime  # 1h apr√®s d√©but
    safety_check_in_completed: bool
    emergency_contact_notified: bool
```

### Agents Sp√©cialis√©s

```python
# backend/agents/community/rencontres/

# 1. Compatibility Analyst Agent
class CompatibilityAnalyst:
    """Analyse la compatibilit√© entre deux personnes"""
    def analyze_compatibility(self, profile_a, profile_b) -> CompatibilityScore
    def suggest_conversation_topics(self, profiles) -> List[str]
    def predict_relationship_potential(self, interaction_history) -> Prediction

# 2. Activity Matcher Agent
class ActivityMatcher:
    """Trouve des activit√©s pour des connexions"""
    def suggest_first_date_activities(self, profiles, location) -> List[Activity]
    def find_group_activities(self, interests, location) -> List[GroupActivity]
    def create_activity_plan(self, connection, preferences) -> ActivityPlan

# 3. Safety Guardian Agent
class SafetyGuardian:
    """Prot√®ge les utilisateurs"""
    def analyze_message_safety(self, message) -> SafetyAnalysis
    def detect_red_flags(self, profile, messages) -> List[RedFlag]
    def generate_safety_tips(self, meeting) -> List[SafetyTip]
    def monitor_check_ins(self, active_meetings) -> SafetyAlerts

# 4. Authenticity Verifier Agent
class AuthenticityVerifier:
    """V√©rifie l'authenticit√© des profils"""
    def verify_photo_match(self, profile_photos, selfie) -> VerificationResult
    def detect_fake_profiles(self, profile) -> FakeDetectionResult
    def analyze_conversation_authenticity(self, messages) -> AuthenticityScore

# 5. Connection Coach Agent
class ConnectionCoach:
    """Conseille sur les relations"""
    def suggest_ice_breakers(self, profiles) -> List[IceBreaker]
    def analyze_conversation_health(self, conversation) -> ConversationAnalysis
    def suggest_next_steps(self, connection) -> List[NextStep]
    def provide_dating_tips(self, user_profile) -> List[Tip]
```

---

## üìä Database Schema Rencontres

```sql
-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
-- MODULE RENCONTRES ‚Äî DATABASE SCHEMA
-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

-- Profils de rencontre
CREATE TABLE rencontre_profiles (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID REFERENCES users(id) UNIQUE,
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW(),
    
    -- Modes actifs
    active_modes TEXT[] DEFAULT ARRAY['friendship'],
    
    -- Profil
    display_name TEXT NOT NULL,
    birth_date DATE NOT NULL,
    location_lat DECIMAL(10, 8),
    location_lng DECIMAL(11, 8),
    location_city TEXT,
    
    -- Contenu
    bio TEXT,
    video_intro_url TEXT,
    voice_note_url TEXT,
    prompts JSONB DEFAULT '{}',
    
    -- Pr√©f√©rences
    interests TEXT[] DEFAULT ARRAY[]::TEXT[],
    activities TEXT[] DEFAULT ARRAY[]::TEXT[],
    looking_for TEXT[] DEFAULT ARRAY[]::TEXT[],
    
    -- Mode romantique
    relationship_goal TEXT,
    
    -- V√©rifications
    photo_verified BOOLEAN DEFAULT FALSE,
    photo_verified_at TIMESTAMP,
    identity_verified BOOLEAN DEFAULT FALSE,
    identity_verified_at TIMESTAMP,
    
    -- Pr√©f√©rences matching
    max_suggestions_per_day INTEGER DEFAULT 10,
    distance_preference_km INTEGER DEFAULT 50,
    age_range_min INTEGER DEFAULT 18,
    age_range_max INTEGER DEFAULT 99,
    gender_preference TEXT[], -- 'male', 'female', 'non_binary', 'all'
    
    -- √âtat
    is_paused BOOLEAN DEFAULT FALSE,
    paused_until TIMESTAMP,
    
    -- Stats
    profile_views INTEGER DEFAULT 0,
    interests_received INTEGER DEFAULT 0,
    interests_sent INTEGER DEFAULT 0,
    connections_made INTEGER DEFAULT 0,
    meetings_completed INTEGER DEFAULT 0
);

-- Photos v√©rifi√©es
CREATE TABLE rencontre_photos (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    profile_id UUID REFERENCES rencontre_profiles(id) ON DELETE CASCADE,
    photo_url TEXT NOT NULL,
    is_verified BOOLEAN DEFAULT FALSE,
    is_primary BOOLEAN DEFAULT FALSE,
    order_index INTEGER DEFAULT 0,
    uploaded_at TIMESTAMP DEFAULT NOW()
);

-- Expressions d'int√©r√™t
CREATE TABLE rencontre_interests (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    from_profile_id UUID REFERENCES rencontre_profiles(id),
    to_profile_id UUID REFERENCES rencontre_profiles(id),
    created_at TIMESTAMP DEFAULT NOW(),
    
    mode TEXT NOT NULL, -- romantic, friendship, activity, group
    context TEXT, -- "On partage l'int√©r√™t pour..."
    message TEXT, -- Message personnalis√©
    
    status TEXT DEFAULT 'pending', -- pending, accepted, declined, expired
    responded_at TIMESTAMP,
    
    UNIQUE(from_profile_id, to_profile_id, mode)
);

-- Connexions mutuelles
CREATE TABLE rencontre_connections (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    profile_a_id UUID REFERENCES rencontre_profiles(id),
    profile_b_id UUID REFERENCES rencontre_profiles(id),
    created_at TIMESTAMP DEFAULT NOW(),
    
    mode TEXT NOT NULL,
    interest_id UUID REFERENCES rencontre_interests(id),
    
    -- Progression
    stage TEXT DEFAULT 'chatting', -- chatting, voice_calls, video_calls, met_irl, ongoing
    stage_updated_at TIMESTAMP DEFAULT NOW(),
    
    -- Qualit√©
    last_interaction_at TIMESTAMP DEFAULT NOW(),
    message_count INTEGER DEFAULT 0,
    
    -- √âtat
    is_active BOOLEAN DEFAULT TRUE,
    ended_at TIMESTAMP,
    ended_reason TEXT,
    
    UNIQUE(profile_a_id, profile_b_id, mode)
);

-- Conversations
CREATE TABLE rencontre_conversations (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    connection_id UUID REFERENCES rencontre_connections(id),
    created_at TIMESTAMP DEFAULT NOW(),
    
    last_message_at TIMESTAMP DEFAULT NOW(),
    last_message_preview TEXT,
    
    -- Stats
    total_messages INTEGER DEFAULT 0,
    voice_messages INTEGER DEFAULT 0,
    video_calls INTEGER DEFAULT 0
);

-- Messages
CREATE TABLE rencontre_messages (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    conversation_id UUID REFERENCES rencontre_conversations(id),
    sender_profile_id UUID REFERENCES rencontre_profiles(id),
    created_at TIMESTAMP DEFAULT NOW(),
    
    content TEXT,
    message_type TEXT DEFAULT 'text', -- text, voice, image, video_call_invite
    media_url TEXT,
    
    -- √âtat
    is_read BOOLEAN DEFAULT FALSE,
    read_at TIMESTAMP,
    
    -- Mod√©ration
    is_flagged BOOLEAN DEFAULT FALSE,
    flag_reason TEXT
);

-- Rencontres planifi√©es
CREATE TABLE rencontre_meetings (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    connection_id UUID REFERENCES rencontre_connections(id),
    proposed_by_profile_id UUID REFERENCES rencontre_profiles(id),
    created_at TIMESTAMP DEFAULT NOW(),
    
    -- D√©tails
    scheduled_datetime TIMESTAMP NOT NULL,
    location_name TEXT,
    location_address TEXT,
    location_lat DECIMAL(10, 8),
    location_lng DECIMAL(11, 8),
    activity_type TEXT, -- cafe, dinner, activity, walk, etc.
    
    -- Confirmation
    status TEXT DEFAULT 'proposed', -- proposed, confirmed, completed, cancelled
    confirmed_at TIMESTAMP,
    completed_at TIMESTAMP,
    cancelled_at TIMESTAMP,
    cancel_reason TEXT,
    
    -- S√©curit√©
    safety_check_in_scheduled_at TIMESTAMP,
    safety_check_in_completed BOOLEAN DEFAULT FALSE,
    safety_check_in_response TEXT, -- safe, need_help, sos
    emergency_contact_notified BOOLEAN DEFAULT FALSE
);

-- Groupes
CREATE TABLE rencontre_groups (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    created_at TIMESTAMP DEFAULT NOW(),
    created_by_profile_id UUID REFERENCES rencontre_profiles(id),
    
    name TEXT NOT NULL,
    description TEXT,
    category TEXT NOT NULL, -- sports, outdoors, arts, social, etc.
    
    -- Location
    location_city TEXT,
    location_lat DECIMAL(10, 8),
    location_lng DECIMAL(11, 8),
    radius_km INTEGER DEFAULT 25,
    
    -- R√®gles
    joining_type TEXT DEFAULT 'open', -- open, approval, invite_only
    max_members INTEGER,
    age_range_min INTEGER,
    age_range_max INTEGER,
    gender_restriction TEXT, -- all, women_only, men_only, etc.
    
    -- √âtat
    is_active BOOLEAN DEFAULT TRUE,
    member_count INTEGER DEFAULT 1
);

-- Membres des groupes
CREATE TABLE rencontre_group_members (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    group_id UUID REFERENCES rencontre_groups(id) ON DELETE CASCADE,
    profile_id UUID REFERENCES rencontre_profiles(id),
    joined_at TIMESTAMP DEFAULT NOW(),
    
    role TEXT DEFAULT 'member', -- admin, moderator, member
    
    -- √âtat
    is_active BOOLEAN DEFAULT TRUE,
    left_at TIMESTAMP,
    
    UNIQUE(group_id, profile_id)
);

-- √âv√©nements de groupe
CREATE TABLE rencontre_group_events (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    group_id UUID REFERENCES rencontre_groups(id),
    created_by_profile_id UUID REFERENCES rencontre_profiles(id),
    created_at TIMESTAMP DEFAULT NOW(),
    
    title TEXT NOT NULL,
    description TEXT,
    
    -- Quand/O√π
    event_datetime TIMESTAMP NOT NULL,
    location_name TEXT,
    location_address TEXT,
    
    -- Participants
    max_participants INTEGER,
    current_participants INTEGER DEFAULT 0,
    
    -- √âtat
    status TEXT DEFAULT 'upcoming', -- upcoming, ongoing, completed, cancelled
);

-- Signalements
CREATE TABLE rencontre_reports (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    reporter_profile_id UUID REFERENCES rencontre_profiles(id),
    reported_profile_id UUID REFERENCES rencontre_profiles(id),
    created_at TIMESTAMP DEFAULT NOW(),
    
    reason TEXT NOT NULL, -- fake_profile, harassment, inappropriate, spam, etc.
    description TEXT,
    evidence_urls TEXT[],
    
    -- Traitement
    status TEXT DEFAULT 'pending', -- pending, reviewing, resolved, dismissed
    resolved_at TIMESTAMP,
    resolution TEXT,
    action_taken TEXT -- warning, suspension, ban
);

-- Blocages
CREATE TABLE rencontre_blocks (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    blocker_profile_id UUID REFERENCES rencontre_profiles(id),
    blocked_profile_id UUID REFERENCES rencontre_profiles(id),
    created_at TIMESTAMP DEFAULT NOW(),
    
    reason TEXT,
    
    UNIQUE(blocker_profile_id, blocked_profile_id)
);

-- Feedback post-rencontre (anonyme)
CREATE TABLE rencontre_feedback (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    meeting_id UUID REFERENCES rencontre_meetings(id),
    from_profile_id UUID REFERENCES rencontre_profiles(id),
    created_at TIMESTAMP DEFAULT NOW(),
    
    -- Rating anonyme
    was_as_expected BOOLEAN,
    felt_safe BOOLEAN,
    would_meet_again BOOLEAN,
    
    -- Commentaire priv√© (non partag√©)
    private_notes TEXT
);

-- Index pour performance
CREATE INDEX idx_profiles_location ON rencontre_profiles USING GIST (
    ll_to_earth(location_lat, location_lng)
);
CREATE INDEX idx_interests_to_profile ON rencontre_interests(to_profile_id, status);
CREATE INDEX idx_connections_profiles ON rencontre_connections(profile_a_id, profile_b_id);
CREATE INDEX idx_groups_category_location ON rencontre_groups(category, location_city);
```

---

# PARTIE 2: MODULE SHOPPING üõí

## üéØ VISION

**Probl√®me Actuel du Magasinage en Ligne:**
- ‚ùå Trop de sites √† comparer manuellement
- ‚ùå Prix diff√©rents partout (+ shipping)
- ‚ùå Difficile de distinguer neuf vs occasion
- ‚ùå Sites frauduleux ou non fiables
- ‚ùå Promotions cach√©es ou fausses
- ‚ùå Pas de vision globale des options
- ‚ùå Temps perdu √©norme √† chercher

**Notre Approche CHE¬∑NU:**
- ‚úÖ "Google du Magasinage" - agr√©gation intelligente
- ‚úÖ Comparaison multi-sites automatique
- ‚úÖ Score de confiance par vendeur
- ‚úÖ Distinction neuf/occasion claire
- ‚úÖ Calcul prix total (produit + taxes + shipping)
- ‚úÖ Historique des prix
- ‚úÖ Alertes de prix
- ‚úÖ Int√©gration cross-sphere

---

## üìã ARCHITECTURE MODULE SHOPPING

```
MODULE SHOPPING (Cross-Sphere)
‚îÇ
‚îú‚îÄ üè™ SPH√àRES D'APPARTENANCE
‚îÇ   ‚îú‚îÄ PERSONAL Sphere ‚Üí Shopping personnel/familial
‚îÇ   ‚îÇ   ‚îú‚îÄ Wishlist personnelle
‚îÇ   ‚îÇ   ‚îú‚îÄ Budget personnel
‚îÇ   ‚îÇ   ‚îú‚îÄ Historique d'achats
‚îÇ   ‚îÇ   ‚îî‚îÄ Pr√©f√©rences (marques, √©thique, etc.)
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ BUSINESS Sphere ‚Üí Approvisionnement entreprise
‚îÇ       ‚îú‚îÄ Procurement
‚îÇ       ‚îú‚îÄ Fournisseurs
‚îÇ       ‚îú‚îÄ Budget d√©partement
‚îÇ       ‚îî‚îÄ Approbations d'achat
‚îÇ
‚îú‚îÄ 1Ô∏è‚É£ RECHERCHE UNIFI√âE (Le "Google du Shopping")
‚îÇ   ‚îú‚îÄ Search Engine
‚îÇ   ‚îÇ   ‚îú‚îÄ Recherche par texte naturel
‚îÇ   ‚îÇ   ‚îú‚îÄ Recherche par image (photo d'un produit)
‚îÇ   ‚îÇ   ‚îú‚îÄ Recherche par code barre/UPC
‚îÇ   ‚îÇ   ‚îî‚îÄ Recherche vocale
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ Sources Agr√©g√©es
‚îÇ   ‚îÇ   ‚îú‚îÄ Marketplaces (Amazon, eBay, Walmart, etc.)
‚îÇ   ‚îÇ   ‚îú‚îÄ Sites de d√©taillants directs
‚îÇ   ‚îÇ   ‚îú‚îÄ Sites de seconde main (Kijiji, FB Marketplace, etc.)
‚îÇ   ‚îÇ   ‚îú‚îÄ Sites sp√©cialis√©s par cat√©gorie
‚îÇ   ‚îÇ   ‚îî‚îÄ Sites internationaux avec shipping
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ Filtres Intelligents
‚îÇ       ‚îú‚îÄ Neuf vs Occasion vs Refurbished
‚îÇ       ‚îú‚îÄ Prix (avec/sans taxes, avec/sans shipping)
‚îÇ       ‚îú‚îÄ D√©lai de livraison
‚îÇ       ‚îú‚îÄ Score de confiance vendeur
‚îÇ       ‚îú‚îÄ √âco-responsable / Local
‚îÇ       ‚îî‚îÄ Disponibilit√© imm√©diate
‚îÇ
‚îú‚îÄ 2Ô∏è‚É£ COMPARAISON INTELLIGENTE
‚îÇ   ‚îú‚îÄ Prix
‚îÇ   ‚îÇ   ‚îú‚îÄ Prix produit
‚îÇ   ‚îÇ   ‚îú‚îÄ Taxes (TVQ, TPS, etc.)
‚îÇ   ‚îÇ   ‚îú‚îÄ Frais de shipping
‚îÇ   ‚îÇ   ‚îú‚îÄ Frais de douane (international)
‚îÇ   ‚îÇ   ‚îî‚îÄ Prix TOTAL final
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ Vendeur
‚îÇ   ‚îÇ   ‚îú‚îÄ Score de confiance (calcul√©)
‚îÇ   ‚îÇ   ‚îú‚îÄ Nombre d'avis
‚îÇ   ‚îÇ   ‚îú‚îÄ Taux de probl√®mes
‚îÇ   ‚îÇ   ‚îú‚îÄ Politique de retour
‚îÇ   ‚îÇ   ‚îî‚îÄ Service client rating
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ Produit
‚îÇ   ‚îÇ   ‚îú‚îÄ Sp√©cifications d√©taill√©es
‚îÇ   ‚îÇ   ‚îú‚îÄ Diff√©rences entre versions
‚îÇ   ‚îÇ   ‚îú‚îÄ Avis agr√©g√©s multi-sources
‚îÇ   ‚îÇ   ‚îú‚îÄ Photos de vraies personnes
‚îÇ   ‚îÇ   ‚îî‚îÄ Score qualit√©/prix
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ Livraison
‚îÇ       ‚îú‚îÄ D√©lai estim√© r√©aliste
‚îÇ       ‚îú‚îÄ Options de livraison
‚îÇ       ‚îú‚îÄ Points de ramassage
‚îÇ       ‚îî‚îÄ Track record du vendeur
‚îÇ
‚îú‚îÄ 3Ô∏è‚É£ INTELLIGENCE SHOPPING
‚îÇ   ‚îú‚îÄ Analyse de Prix
‚îÇ   ‚îÇ   ‚îú‚îÄ Historique de prix (graphique)
‚îÇ   ‚îÇ   ‚îú‚îÄ Prix le plus bas observ√©
‚îÇ   ‚îÇ   ‚îú‚îÄ Pr√©diction: bon moment pour acheter?
‚îÇ   ‚îÇ   ‚îî‚îÄ Alertes de prix personnalis√©es
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ D√©tection de Deals
‚îÇ   ‚îÇ   ‚îú‚îÄ Vraies promos vs faux rabais
‚îÇ   ‚îÇ   ‚îú‚îÄ Codes promo actifs
‚îÇ   ‚îÇ   ‚îú‚îÄ Cashback disponible
‚îÇ   ‚îÇ   ‚îî‚îÄ Programmes de fid√©lit√©
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ Recommandations
‚îÇ       ‚îú‚îÄ Alternatives similaires moins ch√®res
‚îÇ       ‚îú‚îÄ Meilleur rapport qualit√©/prix
‚îÇ       ‚îú‚îÄ Bas√© sur tes achats pass√©s
‚îÇ       ‚îî‚îÄ Bas√© sur tes pr√©f√©rences
‚îÇ
‚îú‚îÄ 4Ô∏è‚É£ CONFIANCE & S√âCURIT√â
‚îÇ   ‚îú‚îÄ Score de Confiance Vendeur
‚îÇ   ‚îÇ   ‚îú‚îÄ Anciennet√© du site
‚îÇ   ‚îÇ   ‚îú‚îÄ Certificats SSL/S√©curit√©
‚îÇ   ‚îÇ   ‚îú‚îÄ Avis multi-plateformes
‚îÇ   ‚îÇ   ‚îú‚îÄ Pr√©sence sociale
‚îÇ   ‚îÇ   ‚îú‚îÄ Historique de plaintes
‚îÇ   ‚îÇ   ‚îî‚îÄ Score global 0-100
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ D√©tection Arnaques
‚îÇ   ‚îÇ   ‚îú‚îÄ Prix trop beaux pour √™tre vrais
‚îÇ   ‚îÇ   ‚îú‚îÄ Sites clones
‚îÇ   ‚îÇ   ‚îú‚îÄ Vendeurs suspects
‚îÇ   ‚îÇ   ‚îî‚îÄ Alertes automatiques
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ Protection Acheteur
‚îÇ       ‚îú‚îÄ Conseils de paiement s√©curis√©
‚îÇ       ‚îú‚îÄ V√©rification avant achat
‚îÇ       ‚îî‚îÄ Suivi des garanties
‚îÇ
‚îú‚îÄ 5Ô∏è‚É£ GESTION DES ACHATS
‚îÇ   ‚îú‚îÄ Wishlists
‚îÇ   ‚îÇ   ‚îú‚îÄ Personnelles
‚îÇ   ‚îÇ   ‚îú‚îÄ Partag√©es (cadeaux, famille)
‚îÇ   ‚îÇ   ‚îú‚îÄ Par cat√©gorie
‚îÇ   ‚îÇ   ‚îî‚îÄ Alertes de disponibilit√©/prix
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ Historique
‚îÇ   ‚îÇ   ‚îú‚îÄ Tous les achats
‚îÇ   ‚îÇ   ‚îú‚îÄ Par cat√©gorie
‚îÇ   ‚îÇ   ‚îú‚îÄ D√©penses mensuelles
‚îÇ   ‚îÇ   ‚îî‚îÄ Export pour comptabilit√©
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ Suivi Commandes
‚îÇ   ‚îÇ   ‚îú‚îÄ Tracking unifi√© multi-vendeurs
‚îÇ   ‚îÇ   ‚îú‚îÄ Notifications de livraison
‚îÇ   ‚îÇ   ‚îú‚îÄ Alertes de retard
‚îÇ   ‚îÇ   ‚îî‚îÄ Preuve de livraison
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ Retours & Garanties
‚îÇ       ‚îú‚îÄ Suivi des retours
‚îÇ       ‚îú‚îÄ Rappels de garantie
‚îÇ       ‚îú‚îÄ Historique des r√©clamations
‚îÇ       ‚îî‚îÄ Assistance retour
‚îÇ
‚îî‚îÄ 6Ô∏è‚É£ INT√âGRATIONS CROSS-SPHERE
    ‚îú‚îÄ ‚Üí Personal Sphere
    ‚îÇ   ‚îú‚îÄ Budget personnel
    ‚îÇ   ‚îú‚îÄ Objectifs d'√©pargne
    ‚îÇ   ‚îú‚îÄ Pr√©f√©rences lifestyle
    ‚îÇ   ‚îî‚îÄ Calendrier (livraisons)
    ‚îÇ
    ‚îú‚îÄ ‚Üí Business Sphere
    ‚îÇ   ‚îú‚îÄ Budget d√©partement
    ‚îÇ   ‚îú‚îÄ Workflow approbation
    ‚îÇ   ‚îú‚îÄ Fournisseurs pr√©f√©r√©s
    ‚îÇ   ‚îî‚îÄ Comptabilit√©
    ‚îÇ
    ‚îú‚îÄ ‚Üí My Team Sphere
    ‚îÇ   ‚îú‚îÄ Achats d'√©quipe
    ‚îÇ   ‚îú‚îÄ Approbations manager
    ‚îÇ   ‚îî‚îÄ Partage de fournisseurs
    ‚îÇ
    ‚îî‚îÄ ‚Üí Government Sphere (Business)
        ‚îú‚îÄ Conformit√© achats
        ‚îú‚îÄ D√©clarations douani√®res
        ‚îî‚îÄ Taxes/TVQ/TPS
```

---

## üîß COMPOSANTS TECHNIQUES SHOPPING

### Backend Services

```python
# backend/services/shopping/

# === Core Shopping Service ===
class ShoppingService:
    """Service principal de recherche et comparaison"""
    
    # Search
    async def search_products(
        self, 
        query: str,
        filters: SearchFilters,
        user_id: str
    ) -> SearchResults
    
    async def search_by_image(
        self,
        image: bytes,
        filters: SearchFilters
    ) -> SearchResults
    
    async def search_by_barcode(
        self,
        barcode: str
    ) -> Product
    
    # Compare
    async def compare_prices(
        self,
        product_ids: List[str]
    ) -> PriceComparison
    
    async def get_price_history(
        self,
        product_id: str,
        days: int = 90
    ) -> PriceHistory
    
    # Trust
    async def get_seller_trust_score(
        self,
        seller_id: str
    ) -> TrustScore
    
    async def verify_deal_authenticity(
        self,
        product_url: str
    ) -> DealVerification

# === Product Aggregator ===
class ProductAggregator:
    """Agr√®ge les produits de multiples sources"""
    
    async def fetch_from_amazon(self, query: str) -> List[Product]
    async def fetch_from_ebay(self, query: str) -> List[Product]
    async def fetch_from_walmart(self, query: str) -> List[Product]
    async def fetch_from_bestbuy(self, query: str) -> List[Product]
    async def fetch_from_kijiji(self, query: str) -> List[Product]
    async def fetch_from_fb_marketplace(self, query: str) -> List[Product]
    # ... etc
    
    async def aggregate_results(
        self,
        sources: List[str],
        query: str,
        filters: SearchFilters
    ) -> AggregatedResults
    
    async def deduplicate_products(
        self,
        products: List[Product]
    ) -> List[UniqueProduct]

# === Price Intelligence ===
class PriceIntelligence:
    """Analyse de prix et pr√©dictions"""
    
    async def calculate_total_price(
        self,
        product: Product,
        destination: Location
    ) -> TotalPrice
    # Returns: {
    #   product_price: 99.99,
    #   taxes: 14.98 (TPS + TVQ),
    #   shipping: 12.00,
    #   duties: 0.00,
    #   total: 126.97
    # }
    
    async def is_good_deal(
        self,
        product: Product
    ) -> DealAnalysis
    
    async def predict_price_trend(
        self,
        product_id: str
    ) -> PricePrediction
    
    async def find_active_coupons(
        self,
        seller: str
    ) -> List[Coupon]
    
    async def find_cashback(
        self,
        seller: str
    ) -> List[CashbackOption]

# === Trust & Safety ===
class TrustAnalyzer:
    """Analyse de confiance des vendeurs"""
    
    async def calculate_trust_score(
        self,
        seller_url: str
    ) -> TrustScore
    # Factors:
    # - Domain age
    # - SSL certificate
    # - Reviews across platforms
    # - Social presence
    # - Complaint history
    # - Return policy clarity
    
    async def detect_scam(
        self,
        product: Product
    ) -> ScamDetection
    
    async def verify_seller(
        self,
        seller: Seller
    ) -> SellerVerification

# === Personal Shopping ===
class PersonalShoppingService:
    """Shopping pour Personal Sphere"""
    
    async def manage_wishlist(
        self,
        user_id: str,
        wishlist_id: str,
        action: WishlistAction
    ) -> Wishlist
    
    async def set_price_alert(
        self,
        user_id: str,
        product_id: str,
        target_price: Decimal
    ) -> PriceAlert
    
    async def get_purchase_history(
        self,
        user_id: str,
        filters: HistoryFilters
    ) -> PurchaseHistory
    
    async def track_order(
        self,
        order_id: str
    ) -> OrderTracking
    
    async def sync_with_budget(
        self,
        user_id: str,
        purchase: Purchase
    ) -> BudgetImpact

# === Business Procurement ===
class ProcurementService:
    """Shopping pour Business Sphere"""
    
    async def create_purchase_request(
        self,
        requester_id: str,
        items: List[PurchaseItem],
        budget_code: str
    ) -> PurchaseRequest
    
    async def get_approved_suppliers(
        self,
        company_id: str,
        category: str
    ) -> List[ApprovedSupplier]
    
    async def submit_for_approval(
        self,
        request_id: str
    ) -> ApprovalWorkflow
    
    async def compare_supplier_quotes(
        self,
        item: PurchaseItem,
        suppliers: List[str]
    ) -> SupplierComparison
    
    async def track_procurement(
        self,
        company_id: str
    ) -> ProcurementDashboard
```

### Agents Sp√©cialis√©s Shopping

```python
# backend/agents/shopping/

# 1. Product Research Agent
class ProductResearchAgent:
    """Recherche approfondie de produits"""
    def research_product(self, query: str) -> ProductResearch
    def compare_alternatives(self, product: Product) -> List[Alternative]
    def analyze_reviews(self, product_id: str) -> ReviewAnalysis
    def find_best_value(self, category: str, budget: Decimal) -> BestValue

# 2. Deal Hunter Agent
class DealHunterAgent:
    """Trouve les meilleures offres"""
    def find_deals(self, category: str) -> List[Deal]
    def verify_deal(self, deal_url: str) -> DealVerification
    def predict_upcoming_sales(self, product: Product) -> SalePrediction
    def find_coupons(self, seller: str) -> List[Coupon]
    def calculate_stacking(self, deals: List[Deal]) -> StackingStrategy

# 3. Trust Evaluator Agent
class TrustEvaluatorAgent:
    """√âvalue la fiabilit√© des vendeurs"""
    def evaluate_seller(self, seller_url: str) -> TrustEvaluation
    def detect_fake_reviews(self, product: Product) -> FakeReviewAnalysis
    def identify_clone_sites(self, url: str) -> CloneDetection
    def assess_risk(self, transaction: Transaction) -> RiskAssessment

# 4. Price Analyst Agent
class PriceAnalystAgent:
    """Analyse les prix et tendances"""
    def analyze_price_history(self, product_id: str) -> PriceAnalysis
    def predict_best_time_to_buy(self, product: Product) -> BuyTiming
    def calculate_true_cost(self, product: Product, location: Location) -> TrueCost
    def compare_new_vs_used(self, product: Product) -> NewVsUsedAnalysis

# 5. Personal Shopping Assistant Agent
class PersonalShoppingAssistant:
    """Assistant personnel d'achat"""
    def recommend_products(self, user_profile: UserProfile, need: str) -> List[Recommendation]
    def manage_wishlists(self, user_id: str) -> WishlistManager
    def track_orders(self, user_id: str) -> OrderTracker
    def alert_on_deals(self, wishlists: List[Wishlist]) -> List[DealAlert]
    def suggest_alternatives(self, budget_exceeded: bool) -> List[Alternative]

# 6. Procurement Specialist Agent (Business)
class ProcurementSpecialist:
    """Sp√©cialiste approvisionnement entreprise"""
    def find_suppliers(self, requirements: Requirements) -> List[Supplier]
    def negotiate_bulk_pricing(self, supplier: Supplier, quantity: int) -> Quote
    def ensure_compliance(self, purchase: Purchase) -> ComplianceCheck
    def optimize_procurement(self, history: PurchaseHistory) -> OptimizationPlan

# 7. Category Expert Agents (sp√©cialis√©s)
class ElectronicsExpert:
    """Expert √©lectronique"""
    def compare_specs(self, products: List[Product]) -> SpecComparison
    def recommend_for_use_case(self, use_case: str) -> Recommendation
    def check_compatibility(self, products: List[Product]) -> CompatibilityCheck

class FashionExpert:
    """Expert mode"""
    def suggest_styles(self, preferences: StylePreferences) -> List[Outfit]
    def find_similar_items(self, image: bytes) -> List[SimilarItem]
    def check_sizing(self, brand: str, user_measurements: Measurements) -> SizeRecommendation

class HomeExpert:
    """Expert maison"""
    def recommend_for_room(self, room: Room, style: str) -> List[Furniture]
    def check_dimensions(self, space: Space, furniture: Furniture) -> FitAnalysis
    def coordinate_colors(self, existing: List[Item], new: Item) -> ColorMatch

# etc. pour chaque cat√©gorie...
```

### Sources de Donn√©es √† Int√©grer

```python
# backend/integrations/shopping/

class ShoppingIntegrations:
    """Int√©grations avec les sources de donn√©es"""
    
    # === Marketplaces ===
    MARKETPLACES = {
        "amazon_ca": AmazonCanadaIntegration,
        "amazon_us": AmazonUSIntegration,
        "ebay": eBayIntegration,
        "walmart_ca": WalmartCanadaIntegration,
        "walmart_us": WalmartUSIntegration,
        "best_buy": BestBuyIntegration,
        "costco": CostcoIntegration,
        "target": TargetIntegration,
        "home_depot": HomeDepotIntegration,
        "canadian_tire": CanadianTireIntegration,
        "staples": StaplesIntegration,
    }
    
    # === Seconde Main ===
    SECOND_HAND = {
        "kijiji": KijijiIntegration,
        "fb_marketplace": FacebookMarketplaceIntegration,
        "craigslist": CraigslistIntegration,
        "poshmark": PoshmarkIntegration,
        "depop": DepopIntegration,
        "vinted": VintedIntegration,
        "ebay_used": eBayUsedIntegration,
        "amazon_warehouse": AmazonWarehouseIntegration,
    }
    
    # === Sp√©cialis√©s ===
    SPECIALIZED = {
        # √âlectronique
        "newegg": NeweggIntegration,
        "b_and_h": BandHIntegration,
        "memory_express": MemoryExpressIntegration,
        "canada_computers": CanadaComputersIntegration,
        
        # Mode
        "ssense": SSenseIntegration,
        "aritzia": AritziaIntegration,
        "h_and_m": HMIntegration,
        "zara": ZaraIntegration,
        
        # Sports
        "sport_chek": SportChekIntegration,
        "mec": MECIntegration,
        "decathlon": DecathlonIntegration,
        
        # Maison
        "ikea": IKEAIntegration,
        "wayfair": WayfairIntegration,
        "structube": StructubeIntegration,
        
        # Alimentation
        "metro": MetroIntegration,
        "iga": IGAIntegration,
        "provigo": ProvigoIntegration,
        "costco_grocery": CostcoGroceryIntegration,
    }
    
    # === Price Tracking ===
    PRICE_TRACKERS = {
        "keepa": KeepaIntegration,  # Amazon price history
        "camelcamelcamel": CamelIntegration,
        "price_history_db": InternalPriceHistoryDB,
    }
    
    # === Coupons & Deals ===
    DEALS = {
        "honey": HoneyIntegration,
        "rakuten": RakutenIntegration,
        "redflagdeals": RedFlagDealsIntegration,
        "slickdeals": SlickDealsIntegration,
        "retailmenot": RetailMeNotIntegration,
    }
    
    # === Reviews ===
    REVIEWS = {
        "trustpilot": TrustpilotIntegration,
        "sitejabber": SiteJabberIntegration,
        "bbb": BBBIntegration,  # Better Business Bureau
        "google_reviews": GoogleReviewsIntegration,
    }
```

---

## üìä Database Schema Shopping

```sql
-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
-- MODULE SHOPPING ‚Äî DATABASE SCHEMA
-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

-- Produits agr√©g√©s
CREATE TABLE shopping_products (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW(),
    
    -- Identification
    name TEXT NOT NULL,
    brand TEXT,
    model TEXT,
    upc TEXT,  -- Universal Product Code
    ean TEXT,  -- European Article Number
    asin TEXT, -- Amazon Standard Identification Number
    
    -- Cat√©gorisation
    category TEXT NOT NULL,
    subcategory TEXT,
    tags TEXT[],
    
    -- Description
    description TEXT,
    specifications JSONB,
    images TEXT[],
    
    -- Agr√©gation
    sources TEXT[],  -- Liste des sources o√π trouv√©
    last_fetched_at TIMESTAMP,
    
    -- Stats
    review_count INTEGER DEFAULT 0,
    avg_rating DECIMAL(2, 1)
);

-- Prix par source
CREATE TABLE shopping_prices (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    product_id UUID REFERENCES shopping_products(id),
    fetched_at TIMESTAMP DEFAULT NOW(),
    
    -- Source
    source TEXT NOT NULL,  -- amazon, ebay, etc.
    seller_id UUID REFERENCES shopping_sellers(id),
    url TEXT NOT NULL,
    
    -- Prix
    price DECIMAL(10, 2) NOT NULL,
    currency TEXT DEFAULT 'CAD',
    original_price DECIMAL(10, 2),  -- Si en promo
    discount_percent DECIMAL(5, 2),
    
    -- Condition
    condition TEXT DEFAULT 'new',  -- new, used, refurbished, open_box
    condition_details TEXT,
    
    -- Disponibilit√©
    in_stock BOOLEAN DEFAULT TRUE,
    stock_quantity INTEGER,
    
    -- Shipping
    shipping_cost DECIMAL(10, 2),
    free_shipping BOOLEAN DEFAULT FALSE,
    shipping_estimate_days INTEGER,
    
    -- Calcul√©
    total_price DECIMAL(10, 2),  -- price + shipping + estimated taxes
    
    INDEX (product_id, source, fetched_at)
);

-- Historique des prix
CREATE TABLE shopping_price_history (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    product_id UUID REFERENCES shopping_products(id),
    source TEXT NOT NULL,
    recorded_at TIMESTAMP DEFAULT NOW(),
    
    price DECIMAL(10, 2) NOT NULL,
    currency TEXT DEFAULT 'CAD',
    
    INDEX (product_id, source, recorded_at)
);

-- Vendeurs/Sites
CREATE TABLE shopping_sellers (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW(),
    
    -- Identification
    name TEXT NOT NULL,
    website_url TEXT,
    platform TEXT,  -- amazon, ebay, independent
    
    -- Localisation
    country TEXT,
    ships_to TEXT[],
    
    -- Trust Score
    trust_score INTEGER DEFAULT 50,  -- 0-100
    trust_score_updated_at TIMESTAMP,
    
    -- Composantes du score
    domain_age_years DECIMAL(4, 1),
    has_ssl BOOLEAN DEFAULT TRUE,
    review_count INTEGER DEFAULT 0,
    avg_rating DECIMAL(2, 1),
    complaint_count INTEGER DEFAULT 0,
    return_policy_score INTEGER,  -- 0-100
    
    -- V√©rification
    is_verified BOOLEAN DEFAULT FALSE,
    verified_at TIMESTAMP,
    verification_type TEXT,  -- manual, automated
    
    -- Drapeaux
    is_flagged BOOLEAN DEFAULT FALSE,
    flag_reason TEXT
);

-- Reviews agr√©g√©es
CREATE TABLE shopping_reviews (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    product_id UUID REFERENCES shopping_products(id),
    
    source TEXT NOT NULL,
    source_review_id TEXT,
    
    rating INTEGER,  -- 1-5
    title TEXT,
    content TEXT,
    author TEXT,
    review_date DATE,
    
    verified_purchase BOOLEAN,
    helpful_count INTEGER DEFAULT 0,
    
    -- Analyse
    is_likely_fake BOOLEAN DEFAULT FALSE,
    sentiment_score DECIMAL(3, 2)  -- -1 to 1
);

-- Wishlists
CREATE TABLE shopping_wishlists (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID REFERENCES users(id),
    created_at TIMESTAMP DEFAULT NOW(),
    
    name TEXT NOT NULL,
    description TEXT,
    is_public BOOLEAN DEFAULT FALSE,
    share_token TEXT,  -- Pour partage
    
    -- Type
    wishlist_type TEXT DEFAULT 'personal',  -- personal, gift, shared, registry
    
    -- Partage
    shared_with UUID[]  -- User IDs
);

-- Items de wishlist
CREATE TABLE shopping_wishlist_items (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    wishlist_id UUID REFERENCES shopping_wishlists(id) ON DELETE CASCADE,
    product_id UUID REFERENCES shopping_products(id),
    added_at TIMESTAMP DEFAULT NOW(),
    
    -- Pr√©f√©rences
    preferred_condition TEXT DEFAULT 'new',
    max_price DECIMAL(10, 2),
    notes TEXT,
    priority INTEGER DEFAULT 5,  -- 1-10
    
    -- √âtat
    is_purchased BOOLEAN DEFAULT FALSE,
    purchased_at TIMESTAMP,
    purchased_by UUID REFERENCES users(id)
);

-- Alertes de prix
CREATE TABLE shopping_price_alerts (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID REFERENCES users(id),
    product_id UUID REFERENCES shopping_products(id),
    created_at TIMESTAMP DEFAULT NOW(),
    
    target_price DECIMAL(10, 2) NOT NULL,
    alert_type TEXT DEFAULT 'below',  -- below, drop_percent, any_drop
    drop_percent INTEGER,  -- Si alert_type = drop_percent
    
    -- √âtat
    is_active BOOLEAN DEFAULT TRUE,
    triggered_at TIMESTAMP,
    triggered_price DECIMAL(10, 2)
);

-- Historique d'achats
CREATE TABLE shopping_purchases (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID REFERENCES users(id),
    purchased_at TIMESTAMP DEFAULT NOW(),
    
    -- Produit
    product_id UUID REFERENCES shopping_products(id),
    product_name TEXT NOT NULL,
    
    -- Achat
    source TEXT NOT NULL,
    seller_id UUID REFERENCES shopping_sellers(id),
    url TEXT,
    
    -- Prix
    price DECIMAL(10, 2) NOT NULL,
    shipping_cost DECIMAL(10, 2),
    taxes DECIMAL(10, 2),
    total_paid DECIMAL(10, 2),
    currency TEXT DEFAULT 'CAD',
    
    -- Condition
    condition TEXT DEFAULT 'new',
    
    -- Tracking
    order_number TEXT,
    tracking_number TEXT,
    carrier TEXT,
    estimated_delivery DATE,
    delivered_at TIMESTAMP,
    
    -- Post-achat
    rating INTEGER,  -- 1-5
    review TEXT,
    would_buy_again BOOLEAN,
    
    -- Budget (Personal Sphere link)
    budget_category TEXT,
    budget_id UUID
);

-- Tracking des commandes
CREATE TABLE shopping_order_tracking (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    purchase_id UUID REFERENCES shopping_purchases(id),
    
    status TEXT NOT NULL,
    status_date TIMESTAMP DEFAULT NOW(),
    location TEXT,
    description TEXT
);

-- Business Procurement
CREATE TABLE shopping_procurement_requests (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    company_id UUID,
    requester_id UUID REFERENCES users(id),
    created_at TIMESTAMP DEFAULT NOW(),
    
    -- D√©tails
    title TEXT NOT NULL,
    description TEXT,
    items JSONB NOT NULL,  -- [{product_id, quantity, specs}]
    
    -- Budget
    budget_code TEXT,
    estimated_total DECIMAL(10, 2),
    
    -- Approbation
    status TEXT DEFAULT 'draft',  -- draft, pending, approved, rejected, ordered
    approved_by UUID REFERENCES users(id),
    approved_at TIMESTAMP,
    rejection_reason TEXT,
    
    -- Commande
    order_id UUID REFERENCES shopping_purchases(id),
    ordered_at TIMESTAMP
);

-- Fournisseurs approuv√©s (Business)
CREATE TABLE shopping_approved_suppliers (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    company_id UUID,
    seller_id UUID REFERENCES shopping_sellers(id),
    
    approved_at TIMESTAMP DEFAULT NOW(),
    approved_by UUID REFERENCES users(id),
    
    -- Contrat
    contract_number TEXT,
    discount_percent DECIMAL(5, 2),
    payment_terms TEXT,
    
    -- Cat√©gories
    approved_categories TEXT[],
    
    is_active BOOLEAN DEFAULT TRUE
);

-- Coupons trouv√©s
CREATE TABLE shopping_coupons (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    seller_id UUID REFERENCES shopping_sellers(id),
    
    code TEXT NOT NULL,
    description TEXT,
    discount_type TEXT,  -- percent, fixed, free_shipping
    discount_value DECIMAL(10, 2),
    
    min_purchase DECIMAL(10, 2),
    categories TEXT[],
    
    valid_from DATE,
    valid_until DATE,
    
    -- V√©rification
    is_verified BOOLEAN DEFAULT FALSE,
    last_tested_at TIMESTAMP,
    success_rate DECIMAL(3, 2)
);

-- Index pour performance
CREATE INDEX idx_prices_product ON shopping_prices(product_id);
CREATE INDEX idx_prices_source ON shopping_prices(source);
CREATE INDEX idx_history_product_date ON shopping_price_history(product_id, recorded_at);
CREATE INDEX idx_wishlists_user ON shopping_wishlists(user_id);
CREATE INDEX idx_alerts_user ON shopping_price_alerts(user_id, is_active);
CREATE INDEX idx_purchases_user ON shopping_purchases(user_id, purchased_at);
CREATE INDEX idx_products_category ON shopping_products(category, subcategory);
CREATE INDEX idx_products_upc ON shopping_products(upc) WHERE upc IS NOT NULL;
```

---

# PARTIE 3: CONNEXIONS CROSS-SPHERE

## üîó Diagramme des Connexions

```
                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                    ‚îÇ          MODULE SHOPPING                ‚îÇ
                    ‚îÇ                                         ‚îÇ
                    ‚îÇ  üîç Search  üìä Compare  üí∞ Track        ‚îÇ
                    ‚îÇ  üè™ Sources  ‚≠ê Trust   üéØ Deals        ‚îÇ
                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                      ‚îÇ
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ                             ‚îÇ                             ‚îÇ
        ‚ñº                             ‚ñº                             ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê           ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê           ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   PERSONAL    ‚îÇ           ‚îÇ   BUSINESS    ‚îÇ           ‚îÇ   MY TEAM     ‚îÇ
‚îÇ    SPHERE     ‚îÇ           ‚îÇ    SPHERE     ‚îÇ           ‚îÇ    SPHERE     ‚îÇ
‚îÇ               ‚îÇ           ‚îÇ               ‚îÇ           ‚îÇ               ‚îÇ
‚îÇ ‚Ä¢ Wishlists   ‚îÇ           ‚îÇ ‚Ä¢ Procurement ‚îÇ           ‚îÇ ‚Ä¢ Team orders ‚îÇ
‚îÇ ‚Ä¢ Budget sync ‚îÇ           ‚îÇ ‚Ä¢ Suppliers   ‚îÇ           ‚îÇ ‚Ä¢ Approvals   ‚îÇ
‚îÇ ‚Ä¢ Purchases   ‚îÇ           ‚îÇ ‚Ä¢ Accounting  ‚îÇ           ‚îÇ ‚Ä¢ Shared lists‚îÇ
‚îÇ ‚Ä¢ Alerts      ‚îÇ           ‚îÇ ‚Ä¢ Compliance  ‚îÇ           ‚îÇ               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò           ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò           ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        ‚îÇ                             ‚îÇ                             ‚îÇ
        ‚îÇ                             ‚îÇ                             ‚îÇ
        ‚ñº                             ‚ñº                             ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê           ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê           ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  GOVERNMENT   ‚îÇ           ‚îÇ   SCHOLAR     ‚îÇ           ‚îÇ  COMMUNITY    ‚îÇ
‚îÇ    SPHERE     ‚îÇ           ‚îÇ    SPHERE     ‚îÇ           ‚îÇ    SPHERE     ‚îÇ
‚îÇ               ‚îÇ           ‚îÇ               ‚îÇ           ‚îÇ               ‚îÇ
‚îÇ ‚Ä¢ Taxes calc  ‚îÇ           ‚îÇ ‚Ä¢ Research    ‚îÇ           ‚îÇ ‚Ä¢ Group buys  ‚îÇ
‚îÇ ‚Ä¢ Duties      ‚îÇ           ‚îÇ   equipment   ‚îÇ           ‚îÇ ‚Ä¢ Recommends  ‚îÇ
‚îÇ ‚Ä¢ Compliance  ‚îÇ           ‚îÇ ‚Ä¢ Lab supplies‚îÇ           ‚îÇ ‚Ä¢ Reviews     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò           ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò           ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üìã ROADMAP D'IMPL√âMENTATION

### Phase 1: Fondations (4 semaines)

**Semaine 1-2: Module Rencontres - Core**
- [ ] Database schema Rencontres
- [ ] RencontresService base
- [ ] Profils de rencontre (CRUD)
- [ ] Discovery par activit√©s

**Semaine 3-4: Module Shopping - Core**
- [ ] Database schema Shopping
- [ ] ShoppingService base
- [ ] Int√©gration Amazon CA (premi√®re source)
- [ ] Recherche basique

### Phase 2: Intelligence (4 semaines)

**Semaine 5-6: Rencontres - Matching**
- [ ] Compatibility scoring
- [ ] Agents: CompatibilityAnalyst, SafetyGuardian
- [ ] Syst√®me d'int√©r√™ts mutuels
- [ ] Conversations

**Semaine 7-8: Shopping - Aggregation**
- [ ] Int√©gration 5+ sources (Amazon, eBay, Walmart, Kijiji, BestBuy)
- [ ] Price comparison
- [ ] ProductAggregator
- [ ] Agents: DealHunter, TrustEvaluator

### Phase 3: Exp√©rience (4 semaines)

**Semaine 9-10: Rencontres - UX**
- [ ] Groupes et √©v√©nements
- [ ] Planification de rencontres
- [ ] S√©curit√© (check-ins)
- [ ] Agents: ConnectionCoach

**Semaine 11-12: Shopping - Intelligence**
- [ ] Price history tracking
- [ ] Trust scoring
- [ ] Wishlists et alertes
- [ ] Agents: PriceAnalyst, PersonalShoppingAssistant

### Phase 4: Cross-Sphere (2 semaines)

**Semaine 13-14:**
- [ ] Shopping ‚Üî Personal (budget sync)
- [ ] Shopping ‚Üî Business (procurement)
- [ ] Rencontres ‚Üî Personal (profil sync)
- [ ] Rencontres ‚Üî Community (groupes)

### Phase 5: Polish & Launch (2 semaines)

**Semaine 15-16:**
- [ ] Tests complets
- [ ] Performance optimization
- [ ] Documentation
- [ ] Beta launch

---

## üìä Estimation Effort

| Module | Composant | Effort (jours) |
|--------|-----------|----------------|
| **Rencontres** | | |
| | Database Schema | 2 |
| | Core Service | 5 |
| | Discovery System | 4 |
| | Matching Algorithm | 5 |
| | Safety System | 3 |
| | Groups & Events | 4 |
| | 5 Agents | 8 |
| | API Routes | 3 |
| | Tests | 4 |
| | **Sous-total** | **38 jours** |
| **Shopping** | | |
| | Database Schema | 3 |
| | Core Service | 5 |
| | Aggregator | 8 |
| | Integrations (10 sources) | 15 |
| | Price Intelligence | 5 |
| | Trust System | 4 |
| | 7+ Agents | 12 |
| | Personal Shopping | 4 |
| | Business Procurement | 5 |
| | API Routes | 4 |
| | Tests | 5 |
| | **Sous-total** | **70 jours** |
| **Cross-Sphere** | | 10 jours |
| **TOTAL** | | **~118 jours** (~6 mois) |

---

## üéØ Priorit√©s Recommand√©es

### Ordre de d√©veloppement:

1. **Shopping Core** (P0) - Impact business √©norme
2. **Shopping Aggregation** (P0) - Valeur diff√©renciatrice
3. **Rencontres Core** (P1) - Nouveau march√©
4. **Shopping Intelligence** (P1) - Fid√©lisation
5. **Rencontres Matching** (P1) - Exp√©rience utilisateur
6. **Cross-Sphere** (P2) - Synergie
7. **Polish** (P2) - Qualit√©

---

## ‚úÖ PROCHAINES √âTAPES

1. **Valider cette architecture** avec Jo
2. **Prioriser**: Rencontres ou Shopping en premier?
3. **Commencer** par le database schema
4. **It√©rer** avec feedback utilisateurs

---

```
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë                                                                               ‚ïë
‚ïë                    PLAN STRAT√âGIQUE COMPLET! üéØ                              ‚ïë
‚ïë                                                                               ‚ïë
‚ïë  MODULE RENCONTRES:                                                           ‚ïë
‚ïë  ‚Ä¢ Alternative au swipe - bas√© sur activit√©s                                 ‚ïë
‚ïë  ‚Ä¢ 4 modes: Amour, Amiti√©, Activit√©s, Groupes                               ‚ïë
‚ïë  ‚Ä¢ 5 agents sp√©cialis√©s                                                      ‚ïë
‚ïë  ‚Ä¢ ~38 jours de d√©veloppement                                                ‚ïë
‚ïë                                                                               ‚ïë
‚ïë  MODULE SHOPPING:                                                             ‚ïë
‚ïë  ‚Ä¢ "Google du magasinage" - agr√©gation multi-sources                         ‚ïë
‚ïë  ‚Ä¢ Personal + Business spheres                                               ‚ïë
‚ïë  ‚Ä¢ Trust scoring, price intelligence                                         ‚ïë
‚ïë  ‚Ä¢ 7+ agents sp√©cialis√©s                                                     ‚ïë
‚ïë  ‚Ä¢ ~70 jours de d√©veloppement                                                ‚ïë
‚ïë                                                                               ‚ïë
‚ïë  IMPACT: Ces modules peuvent rendre CHE¬∑NU INCONTOURNABLE! üöÄ               ‚ïë
‚ïë                                                                               ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
```

**Jo, ce plan te convient? Par quoi veux-tu commencer?** üéØ
